"use strict";(self.webpackChunksharmarajdak_sh=self.webpackChunksharmarajdak_sh||[]).push([[325],{318:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(1151),l=t(7294);function o(e){const n=Object.assign({p:"p",a:"a",ul:"ul",li:"li",ol:"ol",strong:"strong",pre:"pre",code:"code",span:"span"},(0,a.a)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.p,null,"Virtual Machines, or VMs for short, are fairly popular in the Software industry\nand among developers. And for good reason ‚Äî who would mind a disposable OS,\nwithin an OS! Right? They are fairly easy to use, allow you to run multiple\nOS‚Äôs on a single host OS, completely independent of each other\n(okay, there are some limitations in performance compared to bare metal performance,\nbut let‚Äôs leave that aside for now)."),"\n",l.createElement(n.p,null,"One of the bigger problems with using VMs that I felt prevented them from being as\nconvenient as, say, an actual local environment, was the initial setup.\nSetting up a VM and getting it ready to use for development inside a\nVM manager like ",l.createElement(n.a,{href:"https://www.virtualbox.org/"},"VirtualBox")," wasn‚Äôt exactly\na click-click-done process. You needed to:"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Find and download an installation image file for your OS of choice."),"\n",l.createElement(n.li,null,"Create your VM."),"\n",l.createElement(n.li,null,"Boot up your VM, and install each development software and package you needed."),"\n"),"\n",l.createElement(n.p,null,"Yeah, that takes quite some time.\nBut when you‚Äôre someone who wants a consistent development environment\nwithout having to install an infinite amount of software, from programming\nlanguage runtimes to database servers on your local machine, VMs are definitely\na very attractive solution.\nIf you‚Äôre someone like this, and you‚Äôve been unaware, allow me to introduce you to the extreme convenience that is Vagrant."),"\n",l.createElement(n.p,null,"Using Vagrant requires you to install a single installable package,\nwhich you can get from here for your OS.\nThe installation process is trivial really,\nbut do remember to ensure that\n",l.createElement(n.a,{href:"https://www.isunshare.com/blog/how-to-enable-virtualizationvt-in-bios-for-hyper-v-windows-10/"},"virtualization support is enabled"),"\nin your BIOS settings.\nVagrant also requires a VM ‚Äúprovider‚Äù, such as VirtualBox or\nVMWare Fusion to be installed on your system.\nWe‚Äôll be using the free and open-source VirtualBox."),"\n",l.createElement(n.p,null,'First and foremost, what is Vagrant?\nThe official documentation briefly calls it\n"the command line utility for managing the lifecycle of virtual machines".\nThat‚Äôs all you really need to know.\nLet‚Äôs work with it to gain an idea of what it can do for you.'),"\n",l.createElement(n.p,null,"A Vagrant box, which is nothing but a Vagrant-controlled VM,\nis brought up based on a configuration file, which is called,\nby convention, a Vagrantfile (Yes, like a Dockerfile!).\nA Vagrantfile has 5 main config blocks:"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"box"),": The ‚Äúbox‚Äù to start with.\nA box is like a template that forms the base for your Vagrant box.\nEssentially, what ‚Äúimages‚Äù are to a Dockerfile, a ‚Äúbox‚Äù is to a Vagrantfile.\nThey contain a base OS and, optionally, additional configurations and\ninstalled software/packages.\nTo see openly available Vagrant boxes, you can go here."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"provider"),": As mentioned earlier, Vagrant supports a number of VM\nmanagers or ‚Äúproviders‚Äù, including but not limited to VirtualBox,\nVMWare Fusion, and Docker. Not all providers support all base boxes,\nbut you do not need to worry about that yet.\nThe documentation can help you understand more about the supported\nproviders."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"network"),": This is the network configuration, such as forwarding ports to\nthe host machine, binding the VM to particular private IP, etc."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"synced_folder"),": Synced folders parallel volume bind mounts from docker.\nWhat they allow, essentially, is to sync directories between your host and\nthe VM. This could allow you to have setups where you may, for example,\nedit code on your local code editor but see changes reflected in real-time\ninside the VM."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"provision"),': A vanilla base box is rarely of any use without necessary packages\ninstalled and the environment configured. The provision block is where you\n"provision" your VM with necessary changes, and installations through, say,\nshell scripts.'),"\n"),"\n",l.createElement(n.p,null,"You don‚Äôt need to use all the blocks in all cases.\nUsing Vagrant regularly, you‚Äôll eventually gain a feel of what you\nneed and what you don‚Äôt. The documentation is always there to help you."),"\n",l.createElement(n.p,null,"Bored with the theory? Let‚Äôs write some config files!\nCreate a text file names Vagrantfile (no extensions).\nNow, Vagrantfiles are Ruby-based, I believe. But fret not.\nI do not know Ruby. You don‚Äôt need to know Ruby either."),"\n",l.createElement(n.p,null,"Let‚Äôs write up the Vagrantfile:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-ruby"},'Vagrant.configure("2") do |config|\n\n  # Box Config\n  config.vm.box = "ubuntu/bionic64"\n\n  # Provider Config\n  config.vm.provider "virtualbox" do |vb|\n    vb.memory = 2048\n    vb.cpus = 4\n  end\n\n  ## Run VM on private IP\n  config.vm.network "private_network", ip: "192.168.33.10"\n\n  # Volume Mounts\n  config.vm.synced_folder "./var-www-html", "/var/www/html", :mount_options => ["dmode=777", "fmode=666"]\n\n  # Provisioning via a script\n  config.vm.provision "shell", path: "bootstrap.sh"\n\nend\n')),"\n",l.createElement(n.p,null,"Don‚Äôt be confused. It‚Äôs super simple.\nLet‚Äôs go line by line (or block by block)."),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"The outermost block simply specifies the Vagrant configuration version.\nUntil Vagrant updates a major version, this should remain the same across\nVagrantfiles. Inside it, you define the 5 blocks for your Vagrantfile."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-ruby"},'Vagrant.configure("2") do |config|\n    #\n    # Rest of the config goes here\n    #\nend\n')),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Next, we define the box to use as the base. We use an Ubuntu 18.04 box,\nlisted on https://app.vagrantup.com."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'    config.vm.box = "ubuntu/bionic64"\n')),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"We now have told the Vagrantfile the OS we want. But Vagrant can‚Äôt create\nVMs itself. It needs a provider. Let‚Äôs tell Vagrant to use VirtualBox.\nThe provider box will also allow us to configure the resources used by the\nVM. Here, we‚Äôll explicitly tell Vagrant to use 2GB of memory and 4 vCPUs."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'    config.vm.provider "virtualbox" do |vb|\n        vb.memory = 2048\n        vb.cpus = 4\n    end\n')),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"The VM would work even without a networking block. But just so we\ncould enjoy our final result later, we‚Äôll bind the VM to an address\nin the ‚Äúprivate_network‚Äù."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'    config.vm.network "private_network", ip: "192.168.33.10"\n')),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"The synced_folder config, like the network config, is one of those\nconfigs which you use as needed. It can be left out if you feel you\ndon‚Äôt need to sync directory(s) between the host and the VM.\nWe bing a folder in our working directory names ‚Äúvar-www-html‚Äù to the\ndirectory ",l.createElement(n.code,null,"/var/www/html")," inside the VM, and set up file and directory\npermissions in the ",l.createElement(n.code,null,":mount_options")," block.\nI believe this syntax is ruby-based, so it isn‚Äôt the most intuitive,\nbut hopefully, you can make sense of what is happening."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'    config.vm.synced_folder "./var-www-html", "/var/www/html", :mount_options => ["dmode=777", "fmode=666"]\n')),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Finally, we can configure the vanilla VM. This we do via a bash script.\nI‚Äôll use a bash script to install LAMP server packages in the VM,\nnamed ‚Äúbootstrap.sh‚Äù kept in the working directory alongside the Vagrantfile."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'    config.vm.provision "shell", path: "bootstrap.sh"\n')),"\n",l.createElement(n.p,null,"The shell script is trivial. It is nothing but a series of ",l.createElement(n.code,null,"apt-get install"),"\ncommands. Note that the script is run as root, so using sudo is unnecessary:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},"apt-get update\napt-get install apache2 -y\napt-get install mysql-server -y\napt-get install php libapache2-mod-php php-opcache php-cli php-gd php-curl php-mysql -y\nsystemctl restart apache2\n")),"\n",l.createElement(n.p,null,"What we should have now is a directory structure looking like this:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"| var-www-html/\n| bootstrap.sh\n| Vagrantfile\n")),"\n",l.createElement(n.p,null,"Now, we let Vagrant do its magic. Go to your command line and type in the magic words."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},"vagrant up\n")),"\n",l.createElement(n.p,null,"What you should see is a ton of console output going by,\nending with you back in your terminal prompt. Checking VirtualBox will\ntell you that the VM definitely up (the VM‚Äôs name may vary)."),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/296a7c4190649174d9ca3050352a1a1f/8c557/virtualboxconsole.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0ElEQVR42nWRyW7bMBCGBfgZ2tiOVlsLJVkiKUqiRFFbHTuWTj61vRQ9JCh6KBKgeZCcemt76JN2FOfgAi7wYcBlfs7wH0VKadHozdJ8e21NqKsr1bLF2EiWZhwxHrVUs/HC8per4MpAcxPB+oSSH7+K4zcy3JHxjo73eLz3bz7Hu4+i6VGcm2G6JuzaoZqXaIi5tHHi0vBTK8xVhyiHTw/D0/P2+5/u4Wf/+Kt9/M2//GA37z0sHFzFee/hysGlHRUuqQ7HD02/41ULiHavqCjVAHj4FQYxLPeYv3OxCFjjErHa5FaQhWkb40RRlNlsBjHJSkVHzAyyc0Cc1EPWHIK09Wi1jotVmGsudbAQslvM57phLJeLUnaTGP5wDpwg1ni4DNMmlXvo3Ge1R4QVpAGrSNFh3kJEpLgghspYDnk32rj0qASH4OR0pboJmHdiMuyimIpd3g6IVqTcYt6rDtY9ChgAeomwdfFlcSzHtL41Xq7AKsiZ0s4wIdNL/iMutll9i6iMsm6TdTHvo7yHdZTDVwWMTYe5uOSiYUnAd5DtkQqmBXOyIw6C9YavIw7OQy9QXHepAm8Y/7YEUyHVHnz2kxraA2NUd0J7jRQ4Vf4LwTGEaIu3D8wAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Virtual Box Console"\n        title=""\n        src="/static/296a7c4190649174d9ca3050352a1a1f/8c557/virtualboxconsole.png"\n        srcset="/static/296a7c4190649174d9ca3050352a1a1f/772e8/virtualboxconsole.png 200w,\n/static/296a7c4190649174d9ca3050352a1a1f/e17e5/virtualboxconsole.png 400w,\n/static/296a7c4190649174d9ca3050352a1a1f/8c557/virtualboxconsole.png 700w"\n        sizes="(max-width: 700px) 100vw, 700px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",l.createElement(n.p,null,"And since we installed the Apache server on the VM as well,\nvisiting the IP you used in your network config (192.168.33.10 in my case)\nshould greet you with the default Apache page. That is confirmation\nthat out provision (or at least some of it) worked."),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/74658801d3bfc8982a1d6bed0794fd8f/1e043/apachedefaultpage.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 85.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC80lEQVR42n1TS5PaRhDWX81/SCrnXOPKKZccktj7sMsHx95lba/XLBtYxIIeoLdAQtJIjB6DNIPYBQFrDpsG7Euqkq6vur5+fEzPtOAQzhjyw5++I+2r2XIjC9JNo9lu86Igtf6+vbvr9bpC47rB83d8m281WxgnRcEAGGccW1QzRqJXz3JXfXx6ykqG8imesWxeToo8ZjSZMcxoPKPTxb2XJdV2C23bp6dyueLcP8+aP/z86ftnNz/+gn59zY4v2fFH+uIDPbmcn9/Oa212csmOdpnixXuokj9q6e9n2W9v0ctLzvzrk31SG72+sE9r1suafvzOOj03T86sVzX3ojE6r2tHb9Xnb6CkPH8DVfP0XD96h88aSVPmBrreVQaSZUi6KhoawArGsm1CstuXegO5b5lQtZGnuyPDd/WxY/qeMXa9aMLZpuW5bjD2nKFt6vrIsseO4wwhsMIAkTTNkoSkWU5IQabTjBTg4pTmeVFQzjJtyzAswzQMA09wmiQoQHuSTsAwjnE8CSOEUBRFwMMw3BNMKeM+XPfeXwsX9V6t3rtqDept9arZ5+WhpI1F1ZU0T9Y9XrIhX79VPt8q0HPd0T7eSDe8yknSoCeIfLsjSzLPd8DAw3o7fKcF1tytunPXhc13u4IgiJ1OV+iJWTYlU8opiiIKQl+SDU0bDPqSKAz6sqookij2ZVlTVWc0Gg2HKPBh4DDwfc+T+wpI2azkxmMvCAK4Jzwb2CSKnJHjez4k4W60oCQjlFLozqfgpsDhKR4eFg+LJRdGGKFQ0404SZfVClCt1lW1Bg8cOg5YHLCsABBCNS8YF01AlTquq2o6nJcXtDro/xs76WbzVVyWcxzH9nDoBwjS/6/8lxjDvgMUwslBGK43j4fhd9j3feMruMu3cP1VjONkUVXwdLvxCdk8flltHtd7wO+vNpv1zu9D4HsCB0NpJyYkL8uSsdl8PoePBqbIi5xkWZ7njMH/lu4ByYPRLCP39w9ftttZOf8HETJvbvTtNIAAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Apache Default Page"\n        title=""\n        src="/static/74658801d3bfc8982a1d6bed0794fd8f/1e043/apachedefaultpage.png"\n        srcset="/static/74658801d3bfc8982a1d6bed0794fd8f/772e8/apachedefaultpage.png 200w,\n/static/74658801d3bfc8982a1d6bed0794fd8f/e17e5/apachedefaultpage.png 400w,\n/static/74658801d3bfc8982a1d6bed0794fd8f/1e043/apachedefaultpage.png 690w"\n        sizes="(max-width: 690px) 100vw, 690px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",l.createElement(n.p,null,"Feels magical? You haven‚Äôt yet noticed the ",l.createElement(n.code,null,"index.html")," file that magically\nappeared inside ",l.createElement(n.code,null,"var-www-html/"),". The file was created during the Apache\nserver‚Äôs installation and represents the above page, which gets served to\nyou when you visit the VM‚Äôs private IP. Let‚Äôs change the ",l.createElement(n.code,null,"index.html")," file."),"\n",l.createElement(n.p,null,"Replace all content inside ",l.createElement(n.code,null,"var-www-html/index.html")," with:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <title>My Own Default Page</title>\n  </head>\n  <style>\n    body {\n      background: #333;\n      color: #fff;\n    }\n  </style>\n  <body>\n    <h1>Hello World</h1>\n  </body>\n</html>\n')),"\n",l.createElement(n.p,null,'Go back to the VM IP inside your browser, or simply reload the page if\nyou‚Äôre already there. You should now see your very own page.\n"Hello World" in dark mode üíØ.'),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/98ae7826ffdf503d3ec6fc3db35f4596/8c557/helloworldhtml.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 55.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVUlEQVR42mPQMTBVVtdWUFZXVtdR09JX1dQjiNS1DXQNTDX1jRiCAgODg4NDQ0O9vb0NDQ2NiAPGIGDEYG5uYQ4GZmZmxiQCBgzzSNFsTAEY1UxPzQA7c4K5UddToQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="Hello World In Browser"\n        title=""\n        src="/static/98ae7826ffdf503d3ec6fc3db35f4596/8c557/helloworldhtml.png"\n        srcset="/static/98ae7826ffdf503d3ec6fc3db35f4596/772e8/helloworldhtml.png 200w,\n/static/98ae7826ffdf503d3ec6fc3db35f4596/e17e5/helloworldhtml.png 400w,\n/static/98ae7826ffdf503d3ec6fc3db35f4596/8c557/helloworldhtml.png 700w"\n        sizes="(max-width: 700px) 100vw, 700px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",l.createElement(n.p,null,"It really is cool, isn‚Äôt it? The benefits of declarative configuration approaches\ncannot be overstated. The rise of declarative configurations in technologies\nlike Terraform, Docker, Kubernetes, and Ansible among many others is\ntestimony to their usefulness."),"\n",l.createElement(n.p,null,"Using VMs may or may or be for you, and their need may vary from person to person\nand company to company. But there is no denying the convenience Vagrant\nbrings in."),"\n",l.createElement(n.p,null,"I‚Äôll leave you with some other basic commands used for Vagrant VMs.\nMost of these need you to be in the same working directory as the Vagrantfile."),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,l.createElement(n.code,null,"vagrant destroy"))," forcefully destroys the VM. You won‚Äôt be able to reboot it. vagrant up again should create a new VM."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,l.createElement(n.code,null,"vagrant halt"))," halts or suspends the VM, so that you may later start it again with vagrant resume"),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,l.createElement(n.code,null,"vagrant init"))," will generate for you a basic Vagrantfile with helpful comments. It may be a good starting point for your VMs."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,l.createElement(n.code,null,"vagrant ssh"))," ssh‚Äôs you into the VM, if you feel the need to do so."),"\n"),"\n",l.createElement(n.p,null,"That‚Äôs it for now, dear reader. Until the next time I get excited about something enough to write about it, take care and happy learning üòÑ"))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.a)(),e.components);return n?l.createElement(n,e,l.createElement(o,e)):o(e)},i=t(3735),s=t(3967),c=t.n(s),u=t(3608),d=t(7474),m=t(2228),h=t(4539),g=t(1399),p=t(9878),f=t(6096);const y=e=>{let{data:{mdx:n},children:t}=e;const{theme:o}=l.useContext(m.Z),r=o===i.P,s=l.createElement(f.Z,{title:n.frontmatter.title,description:n.frontmatter.listingContent,additionalKeywords:n.frontmatter.keywords,slug:"/blog/"+n.frontmatter.slug+"/"}),y=l.createElement("main",{className:c()(d.Se,r?null:d.Xe,u._$)},l.createElement(h.Z),l.createElement("section",{className:u.Vi},l.createElement("div",{className:u.Qx,"data-aos":"fade-up","data-aos-duration":"200"},l.createElement("div",{className:u.WE},n.frontmatter.title),l.createElement("div",{className:u.aY},n.frontmatter.listingContent),l.createElement("div",{className:u.Ye},n.frontmatter.date," | ",n.frontmatter.author," |"," ",Math.floor(n.timeToRead)+" minute read"),l.createElement("div",{className:u.qE})),l.createElement("div",{"data-aos":"fade-up","data-aos-duration":"1000"},l.createElement(a.Z,{components:p.Z},t))),l.createElement("div",{className:u.sC}),l.createElement(g.Z));return l.createElement(l.Fragment,null,s,y)};function b(e){return l.createElement(y,e,l.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-blogpost-jsx-content-file-path-src-posts-2020-09-15-index-mdx-a129480a368356fc0401.js.map